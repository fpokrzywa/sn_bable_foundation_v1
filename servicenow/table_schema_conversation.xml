<?xml version="1.0" encoding="UTF-8"?>
<!--
  BabelPhish Conversation History Table

  This table stores conversation history between users and the BabelPhish AI assistant.

  Table Name: x_babelphish_conversation
  Label: BabelPhish Conversation

  To create this table in ServiceNow:
  1. Navigate to System Definition > Tables
  2. Click "New"
  3. Use the fields defined below
-->
<database>
  <element label="x_babelphish_conversation" max_length="40" name="x_babelphish_conversation" type="collection">
    <element label="User" mandatory="true" max_length="32" name="user" reference="sys_user" type="reference"/>
    <element label="Message" mandatory="true" max_length="4000" name="message" type="string"/>
    <element label="Response" mandatory="true" max_length="4000" name="response" type="string"/>
    <element label="Intent" max_length="40" name="intent" type="string"/>
    <element label="Confidence Score" max_length="40" name="confidence_score" type="decimal"/>
    <element label="Session ID" max_length="40" name="session_id" type="string"/>
    <element label="Feedback Rating" max_length="40" name="feedback_rating" type="integer"/>
    <element label="Feedback Comment" max_length="1000" name="feedback_comment" type="string"/>
  </element>
</database>

<!--
  Field Definitions:

  1. User (reference to sys_user)
     - Stores reference to the user who sent the message
     - Mandatory field

  2. Message (string, 4000 chars)
     - The user's input message/question
     - Mandatory field

  3. Response (string, 4000 chars)
     - The AI's response to the user
     - Mandatory field

  4. Intent (string, 40 chars)
     - The detected intent (incidents, changes, knowledge, user, general)
     - Optional field

  5. Confidence Score (decimal)
     - AI confidence score for the intent detection
     - Optional field

  6. Session ID (string, 40 chars)
     - Groups related conversations in a session
     - Optional field

  7. Feedback Rating (integer)
     - User's rating of the response (1-5)
     - Optional field

  8. Feedback Comment (string, 1000 chars)
     - User's feedback comment
     - Optional field

  Additional system fields automatically created:
  - sys_id (primary key)
  - sys_created_on (timestamp)
  - sys_created_by (user)
  - sys_updated_on (timestamp)
  - sys_updated_by (user)
-->
